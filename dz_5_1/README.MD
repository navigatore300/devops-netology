
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.    

---
_Ответ :_  
В моём понимании _аппаратная виртуализация_, исходя из названия, подразумевает поддержку разделения ресурсов железа 
машины, путем выполнения команд процессора заложенных разработчиком чипа. Виртуальной машине предоставляются все 
необходимые компоненты: процессор, память, дисковое пространство и т.д.  
В случае _паравиртуализации_ появляются устройства, которые эмулируют аппаратные части компьютера, хотя таковыми 
физически не являются, а представляют из себя программный код, который, в свою очередь, уже работает с аппаратными 
устройствами.  
В модели виртуализации на уровне операционной системы виртуальная машина имеет лишь свою виртуальную среду в которой она 
работает. При этом используется ядро хостовой операционной системы.

При полной виртуализации ядро гостевой системы не знает о существовании гипервизора(ядро гостевой системы не изменено), При паравиртуализации ядро гостевой системы модифицировано и имеет API интерфейс для общения с гипервизором.

---
## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

---
_Ответ :_  
- Высоконагруженная база данных, чувствительная к отказу.  
Физические сервера(Continuous availability(CA) / непрерывная доступность), объединенные в кластер.  
При недоступности финансов - Паравиртуализация серверов объединенных в кластер.  
Основание - непрерывность в работе, при максимальной производительности в случае CA.
- Различные web-приложения.  
Виртуализация уровня ОС.  
Основание - не высокая загрузка аппаратных ресурсов.
- Windows системы для использования бухгалтерским отделом.
Виртуализация на уровне ОС.  
Основание - в случае клиент-серверного приложения нагрузка в основном ложится на сервер. Нет необходимости расходовать ресурсы. 
- Системы, выполняющие высокопроизводительные расчеты на GPU.  
Паравиртуализация.  
Основание - Устройство GPU можно пробросить внутрь виртуальной машины, а остальные ресурсы использовать для работы других виртуальных машин. 


---
## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

---  
_Ответ :_  
1. Подойдут Hyper-V, vSphere, Proxmox c машинами KVM: они хорошо поддерживают виртуальные машины с Windows и Linux, имеют возможности (балансировка, репликация, бекапы) и могут работать в кластере гипервизоров, что необходимо для работы большого количества виртуальных машин.
2. Подойдёт Proxmox в режиме KVM: open source решение, поддерживает Windows гостей, имеет удобные возможности по управлению.
3. Hyper-V Server, максимально совместим так как разработчиком является сам Microsoft, полностью бесплатен.
4. Виртуализация на основе контейнеров LXD. Позволит произвести тестирование на большом количестве различных дистрибутивов Linux. Так как существует большое количество шаблонов.  
---
## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

---
_Ответ :_  
При использовании гетерогенной среды виртуализации будут наблюдаться такие проблемы и недостатки:
- необходимо иметь больший штат сотрудников, так как множество систем требует глубоких познаний и поддержания осведомленности о происходящем развитии определенной системы;
- производить своевременную установку обновлений безопасности для всех систем, а так как их много, то и исправления будут разнесены во времени;
- при использовании общих ресурсов будет требоваться больше усилий по их интеграции с различными системами.
- вендор может использовать протоколы собственной разработки не поддерживаемые другими системами.

Для устранения данных проблем и недостатков:
- обучать сотрудников на профильных курсах от вендоров.
- приобрести платную техническую поддержку от вендоров.

Если бы у меня был выбор, то я бы не создавал гетерогенной среды. Даже при использовании некоторых систем для узких 
целей, чтобы не расходовать ресурсы на полноценное поддержание, все равно придется поддерживать ее для установки 
обновлений безопасности. В целом инфраструктура будет иметь большую поверхность для атаки, благодаря широкому спектру 
систем. Вероятность несовместимость систем очень велика. Миграция из системы в систему затруднительна.  

---
